---
title: "Analyse du trafic VéloMagg à Montpellier"
author: "   "
format: html
execute:
  echo: true  # Affiche le code
  output: true  # Affiche les résultats du code
---


## Chargement des données et traitement initial

```{python}
import pandas as pd
import seaborn as sns
import matplotlib.pyplot as plt
from IPython.display import display

#Charger le fichier de données :
chemin_fichier = r'C:\Users\Clara\Desktop\dossier Projet\TAM_MMM_CoursesVelomagg.csv' 
df = pd.read_csv(chemin_fichier)

# Nettoyer et convertir les dates
df['Departure'] = pd.to_datetime(df['Departure'], errors='coerce')
df['Return'] = pd.to_datetime(df['Return'], errors='coerce')
df.dropna(subset=['Covered distance (m)', 'Duration (sec.)', 'Departure', 'Return'], inplace=True)

# Calculer les statistiques descriptives
statistiques_descriptives = df[['Covered distance (m)', 'Duration (sec.)']].describe()
print("Statistiques descriptives :")

#créer une copie de la table pour eviter de modifier l'original 
df_kde=df.copy()
#Appliquer la transformation logarithmique a la colonne Duration afin de réduire la plage des valeurs
df_kde['Log_Duration']=np.log1p(df_kde['Duration (sec.)'])

#Tracer la distribution kde(Kernel density estimate)
fig,ax = plt.subplots(1,1,figsize(10,5))
sns.kdeplot(df_kde['Log_Duration'], ax=ax,fill=True,cut=0,bw_adjust=0.5)
ax.set_xlabel("Logarithme de la durée (sec)")
ax.set_ylabel("Densité de probabilité")
ax.set_title("Estimation de la densité de la durée des trajets")
plt.tight_layout()
plt.show()
```
